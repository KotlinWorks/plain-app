import{o as s,c as o,e as a,d as Y,u as z,n as O,r,s as U,a as X,i as L,t as x,ci as J,aM as P,a3 as W,cj as ee,K as te,L as B,M as ne,N as se,g as m,T as oe,j as h,S as ae,l as D,F as ie,A as ce,O as v,w as H,x as y,X as re,Y as le,$ as _e,Z as de,_ as ue}from"./index-df35a132.js";import{u as pe}from"./markdown-cf6b239f.js";const me={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},he=a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h6q.425 0 .713.288T12 4q0 .425-.288.713T11 5H5v14h14v-6q0-.425.288-.713T20 12q.425 0 .713.288T21 13v6q0 .825-.588 1.413T19 21H5Zm4-6q-.275-.275-.275-.7T9 13.6L17.6 5H15q-.425 0-.713-.288T14 4q0-.425.288-.713T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10q-.425 0-.713-.288T19 9V6.4l-8.625 8.625q-.275.275-.675.275T9 15Z"},null,-1),ve=[he];function ye(f,i){return s(),o("svg",me,ve)}const Te={name:"material-symbols-open-in-new-rounded",render:ye},fe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qe=a("path",{fill:"currentColor",d:"M15.375 19.25q-.525.25-.95-.038T14 18.275q0-.25.163-.487t.412-.363q1.575-.75 2.5-2.225T18 11.95q0-1.125-.425-2.187T16.25 7.8L16 7.55V9q0 .425-.288.713T15 10q-.425 0-.713-.288T14 9V5q0-.425.288-.713T15 4h4q.425 0 .713.288T20 5q0 .425-.288.713T19 6h-1.75l.4.35q1.225 1.225 1.788 2.663T20 11.95q0 2.4-1.25 4.363t-3.375 2.937ZM5 20q-.425 0-.713-.288T4 19q0-.425.288-.713T5 18h1.75l-.4-.35q-1.225-1.225-1.788-2.663T4 12.05q0-2.4 1.25-4.362T8.625 4.75q.525-.25.95.038t.425.937q0 .25-.163.488t-.412.362q-1.575.75-2.5 2.225T6 12.05q0 1.125.425 2.188T7.75 16.2l.25.25V15q0-.425.288-.713T9 14q.425 0 .713.288T10 15v4q0 .425-.288.713T9 20H5Z"},null,-1),ge=[qe];function be(f,i){return s(),o("svg",fe,ge)}const we={name:"material-symbols-sync-rounded",render:be},Ce={class:"container"},ke={class:"title"},Me={class:"subtitle v-center"},$e={key:1,class:"author"},Ee={class:"badge"},Fe=["onClick"],Ve={key:2,indeterminate:"",class:"spinner-sm"},Le=["disabled","onClick"],xe=["href"],Be=["innerHTML"],T="FEED_ENTRY",De=Y({__name:"FeedEntryView",setup(f){const{t:i}=z(),A=O(),q=r(A.params.id),n=r(),l=r(""),_=r(),{app:N,fileIdKey:Z}=U(X()),{render:g}=pe(N,Z),{refetch:Q}=L({handle:async(e,t)=>{t?x(i(t),"error"):(n.value=e.feedEntry,l.value=await g(e.feedEntry.content||e.feedEntry.description))},document:J,variables:()=>({id:q.value}),appApi:!0});L({handle:(e,t)=>{t?x(i(t),"error"):e&&(_.value=e.tags)},document:P,variables:{type:T},appApi:!0});function G(){var e,t;re(le,{tagType:T,tags:_.value,item:{key:(e=n.value)==null?void 0:e.id,title:"",size:0},selected:(t=_.value)==null?void 0:t.filter(d=>{var c;return(c=n.value)==null?void 0:c.tags.some(u=>u.id===d.id)})})}const{mutate:I,loading:b,onDone:R}=W({document:ee,appApi:!0});R(async e=>{const t=e.data;n.value=t.syncFeedContent,l.value=await g(t.syncFeedContent.content||t.syncFeedContent.description)});const S=()=>{I({id:q.value})},w=e=>{e===T&&Q()};return te(()=>{B.on("refetch_by_tag_type",w)}),ne(()=>{B.off("refetch_by_tag_type",w)}),(e,t)=>{var C,k,M,$,E,F,V;const d=_e,c=de,u=we,j=Te,p=se("tooltip");return s(),o("div",Ce,[a("h2",ke,m((C=n.value)==null?void 0:C.title),1),a("div",Me,[(k=n.value)!=null&&k.publishedAt?(s(),oe(d,{key:0,class:"time",id:h(ae)((M=n.value)==null?void 0:M.publishedAt),raw:n.value},null,8,["id","raw"])):D("",!0),($=n.value)!=null&&$.author?(s(),o("span",$e,m((E=n.value)==null?void 0:E.author),1)):D("",!0),(s(!0),o(ie,null,ce((F=n.value)==null?void 0:F.tags,K=>(s(),o("span",Ee,m(K.name),1))),256)),v((s(),o("md-icon-button",{onClick:H(G,["prevent"]),style:{"margin-inline-start":"8px"}},[y(c)],8,Fe)),[[p,e.$t("add_to_tags")]]),h(b)?(s(),o("md-circular-progress",Ve)):v((s(),o("md-icon-button",{key:3,class:"btn-icon",disabled:h(b),onClick:H(S,["prevent"])},[y(u)],8,Le)),[[p,e.$t("sync_content")]]),v((s(),o("a",{href:(V=n.value)==null?void 0:V.url,target:"_blank"},[a("md-icon-button",null,[y(j)])],8,xe)),[[p,e.$t("view_original_article")]])]),a("div",{class:"md-container",innerHTML:l.value},null,8,Be)])}}});const Ne=ue(De,[["__scopeId","data-v-1bcf19dc"]]);export{Ne as default};

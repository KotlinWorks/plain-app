import{d as H,u as Q,r as v,s as j,a as K,ai as W,V as X,aO as J,o as n,c as a,b as i,e as x,w as P,f as l,k as d,K as I,N as C,g as s,F as k,y as q,x as Y,aP as D,aQ as T,af as Z,j as f,Q as ee,l as te,t as se,aR as oe,am as ne,aS as ae,_ as ie}from"./index-474238de.js";import{_ as le}from"./Breadcrumb-f423bf18.js";import{c as ce}from"./index-63207f32.js";import{n as de}from"./list-6498ebd9.js";import{k as re,b as ue,j as me}from"./files-2e4c4e6b.js";import"./search-c45b9009.js";import"./baseIndexOf-70b929c6.js";import"./toInteger-7eb45424.js";const pe={class:"v-toolbar"},_e={class:"right-actions"},he=["onClick"],ve={class:"form-check mt-2 me-4"},ke={class:"form-check-label",for:"select-mode"},fe={class:"panel-container"},be={key:0,class:"file-items"},we=["onClick","onDblclick","onContextmenu"],ye=["onUpdate:modelValue"],Ve=["src"],ge={class:"title"},xe={style:{"font-size":"0.75rem"}},Ie={key:1,class:"no-data-placeholder"},Ce={key:0,class:"file-item-info"},De=H({__name:"FilesRecentVIew",setup(Te){const{t:p}=Q(),b=v([]),r=v(!1),{app:_}=j(K()),{loading:R,files:u}=re(_),{visible:E,index:F,view:N,hide:A}=W(),{downloadFile:w,downloadDir:S,downloadFiles:$}=ue(_),{view:y}=me(b,N),h=v(null),{mutate:M,onDone:U}=X({document:J,appApi:!0});U(e=>{$(e.data.setTempValue.key)});const z=()=>{const e=[];if(u.value.forEach(o=>{o.checked&&e.push({path:o.path})}),e.length===0){se(p("select_first"),"error");return}M({key:oe(),value:JSON.stringify(e)})};function L(e){if(r.value){e.checked=!e.checked;return}h.value=e}function V(e){return D(e.name)||T(e.name)||ae(e.name)}function O(e){V(e)?y(u.value,e):w(e.path)}function B(e,o){e.preventDefault();let c;o.isDir?c=[{label:p("download"),onClick:()=>{S(o.path)}}]:(c=[],V(o)&&c.push({label:p("open"),onClick:()=>{y(u.value,o)}}),c.push({label:p("download"),onClick:()=>{w(o.path)}})),ce({x:e.x,y:e.y,items:c})}return(e,o)=>{const c=le,G=ne;return n(),a(k,null,[i("div",pe,[x(c,{current:e.$t("recent_files")},null,8,["current"]),i("div",_e,[r.value?(n(),a("button",{key:0,type:"button",class:"btn btn-action",onClick:P(z,["stop"])},l(e.$t("download")),9,he)):d("",!0),i("div",ve,[I(i("input",{class:"form-check-input","onUpdate:modelValue":o[0]||(o[0]=t=>r.value=t),id:"select-mode",type:"checkbox"},null,512),[[C,r.value]]),i("label",ke,l(e.$t("select_mode")),1)])])]),i("div",fe,[s(_).permissions.includes("WRITE_EXTERNAL_STORAGE")?(n(),a("div",be,[(n(!0),a(k,null,q(s(u),t=>{var g;return n(),a("div",{key:t.path,class:Y(["file-item",{active:((g=h.value)==null?void 0:g.path)===t.path}]),onClick:m=>L(t),onDblclick:m=>O(t),onContextmenu:m=>B(m,t)},[r.value?I((n(),a("input",{key:0,class:"form-check-input","onUpdate:modelValue":m=>t.checked=m,type:"checkbox"},null,8,ye)),[[C,t.checked]]):d("",!0),s(D)(t.name)||s(T)(t.name)?(n(),a("img",{key:1,src:s(Z)(t.fileId)+"&w=50&h=50",width:"50",height:"50"},null,8,Ve)):d("",!0),i("div",ge,[f(l(t.name)+" ",1),i("div",xe,[f(l(s(ee)(t.updatedAt)),1),t.isDir?d("",!0):(n(),a(k,{key:0},[f(", "+l(s(te)(t.size)),1)],64))])])],42,we)}),128))])):d("",!0),s(u).length===0?(n(),a("div",Ie,l(e.$t(s(de)(s(R),s(_).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):d("",!0)]),h.value?(n(),a("div",Ce,l(e.$t("path"))+": "+l(h.value.path),1)):d("",!0),x(G,{visible:s(E),index:s(F),sources:b.value,onHide:s(A)},null,8,["visible","index","sources","onHide"])],64)}}});const Ue=ie(De,[["__scopeId","data-v-af25b649"]]);export{Ue as default};

import{d as W,u as X,r as v,a as j,s as q,bq as J,a3 as Q,ba as H,aA as P,N as Y,o as n,c as a,e as l,x as T,O as Z,w as V,l as i,f as p,g as r,j as o,F as k,A as ee,z as te,bb as F,bc as R,at as se,S as oe,k as ne,ag as ae,bd as ce,ah as le,bg as ie,bh as re,_ as de}from"./index-df35a132.js";import{_ as ue}from"./Breadcrumb-120bdd32.js";import{c as _e}from"./index-4e369b28.js";import{n as pe}from"./list-6498ebd9.js";const he={class:"v-toolbar"},me={class:"right-actions"},ve=["onClick"],ke={class:"form-check-label"},be=["checked"],ge={class:"panel-container"},fe={key:0,class:"file-items"},we=["onClick","onDblclick","onContextmenu"],ye=["checked"],De=["src"],Ie={class:"title"},Ce={style:{"font-size":"0.75rem"}},Te={key:1,class:"no-data-placeholder"},Ve={key:0,class:"file-item-info"},Fe=W({__name:"FilesRecentVIew",setup(Re){const{t:h}=X(),x=v([]),d=v(!1),b=j(),{app:g,fileIdKey:f}=q(b),{loading:E,files:u}=J(f),{downloadFile:w,downloadDir:S,downloadFiles:A}=ae(f),{view:y}=ie(x,(e,s)=>{b.lightbox={sources:e,index:s,visible:!0}}),_=v(null),{mutate:N,onDone:$}=Q({document:H,appApi:!0});$(e=>{A(e.data.setTempValue.key)});const D=()=>{const e=[];return u.value.forEach(s=>{s.checked&&e.push({path:s.path})}),e};function z(e){d.value=e.target.checked}const L=()=>{N({key:ce(),value:JSON.stringify(D())})},M=P(()=>D().length>0);function O(e){if(d.value){e.checked=!e.checked;return}_.value=e}function I(e){return F(e.name)||R(e.name)||re(e.name)}function B(e){I(e)?y(u.value,e):w(e.path)}function G(e,s){e.preventDefault();let c;s.isDir?c=[{label:h("download"),onClick:()=>{S(s.path)}}]:(c=[],I(s)&&c.push({label:h("open"),onClick:()=>{y(u.value,s)}}),c.push({label:h("download"),onClick:()=>{w(s.path)}})),_e({x:e.x,y:e.y,items:c})}return(e,s)=>{const c=ue,U=le,K=Y("tooltip");return n(),a(k,null,[l("div",he,[T(c,{current:e.$t("recent_files")},null,8,["current"]),l("div",me,[d.value&&M.value?Z((n(),a("md-icon-button",{key:0,onClick:V(L,["stop"])},[T(U)],8,ve)),[[K,e.$t("download")]]):i("",!0),l("label",ke,[l("md-checkbox",{"touch-target":"wrapper",onChange:z,checked:d.value},null,40,be),p(r(e.$t("select_mode")),1)])])]),l("div",ge,[o(g).permissions.includes("WRITE_EXTERNAL_STORAGE")?(n(),a("div",fe,[(n(!0),a(k,null,ee(o(u),t=>{var C;return n(),a("div",{key:t.path,class:te(["file-item",{active:((C=_.value)==null?void 0:C.path)===t.path}]),onClick:m=>O(t),onDblclick:V(m=>B(t),["prevent"]),onContextmenu:m=>G(m,t)},[d.value?(n(),a("md-checkbox",{key:0,"touch-target":"wrapper",checked:t.checked},null,8,ye)):i("",!0),o(F)(t.name)||o(R)(t.name)?(n(),a("img",{key:1,src:o(se)(t.fileId)+"&w=50&h=50",width:"50",height:"50"},null,8,De)):i("",!0),l("div",Ie,[p(r(t.name)+" ",1),l("div",Ce,[p(r(o(oe)(t.updatedAt)),1),t.isDir?i("",!0):(n(),a(k,{key:0},[p(", "+r(o(ne)(t.size)),1)],64))])])],42,we)}),128))])):i("",!0),o(u).length===0?(n(),a("div",Te,r(e.$t(o(pe)(o(E),o(g).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):i("",!0)]),_.value?(n(),a("div",Ve,r(e.$t("path"))+": "+r(_.value.path),1)):i("",!0)],64)}}});const Ne=de(Fe,[["__scopeId","data-v-90801624"]]);export{Ne as default};

import{d as W,u as X,r as k,c as j,s as J,br as q,a2 as H,bb as P,az as Y,L as Z,o as n,e as a,f as c,x as V,M as ee,w as S,m as i,g as h,j as r,k as o,F as b,A as te,z as se,bc as F,bd as R,as as oe,Q as ne,l as ae,af as ce,be as le,ag as ie,au as re,av as de,bh as ue,bi as _e,_ as pe}from"./index-5e3ce573.js";import{_ as he}from"./Breadcrumb-db3f2c63.js";import{c as me}from"./index-db3fd04a.js";import{n as ve}from"./list-6498ebd9.js";const ke=_=>(re("data-v-130ba9c2"),_=_(),de(),_),be={class:"v-toolbar"},ge={class:"right-actions"},we=["onClick"],fe=ke(()=>c("md-ripple",null,null,-1)),ye={class:"form-check-label"},Ce=["checked"],De={class:"panel-container"},Te={key:0,class:"file-items"},Ie=["onClick","onDblclick","onContextmenu"],Ve=["checked"],Se=["src"],Fe={class:"title"},Re={style:{"font-size":"0.75rem"}},xe={key:1,class:"no-data-placeholder"},Ee={key:0,class:"file-item-info"},Ae=W({__name:"FilesRecentView",setup(_){const{t:m}=X(),x=k([]),d=k(!1),g=j(),{app:w,urlTokenKey:f}=J(g),{loading:E,files:u}=q(f),{downloadFile:y,downloadDir:A,downloadFiles:N}=ce(f),{view:C}=ue(x,(e,s)=>{g.lightbox={sources:e,index:s,visible:!0}}),p=k(null),{mutate:$,onDone:z}=H({document:P,appApi:!0});z(e=>{N(e.data.setTempValue.key)});const D=()=>{const e=[];return u.value.forEach(s=>{s.checked&&e.push({path:s.path})}),e};function M(e){d.value=e.target.checked}const L=()=>{$({key:le(),value:JSON.stringify(D())})},B=Y(()=>D().length>0);function G(e){if(d.value){e.checked=!e.checked;return}p.value=e}function T(e){return F(e.name)||R(e.name)||_e(e.name)}function O(e){T(e)?C(u.value,e):y(e.path)}function U(e,s){e.preventDefault();let l;s.isDir?l=[{label:m("download"),onClick:()=>{A(s.path)}}]:(l=[],T(s)&&l.push({label:m("open"),onClick:()=>{C(u.value,s)}}),l.push({label:m("download"),onClick:()=>{y(s.path)}})),me({x:e.x,y:e.y,items:l})}return(e,s)=>{const l=he,K=ie,Q=Z("tooltip");return n(),a(b,null,[c("div",be,[V(l,{current:e.$t("recent_files")},null,8,["current"]),c("div",ge,[d.value&&B.value?ee((n(),a("button",{key:0,class:"icon-button",onClick:S(L,["stop"])},[fe,V(K)],8,we)),[[Q,e.$t("download")]]):i("",!0),c("label",ye,[c("md-checkbox",{"touch-target":"wrapper",onChange:M,checked:d.value},null,40,Ce),h(r(e.$t("select_mode")),1)])])]),c("div",De,[o(w).permissions.includes("WRITE_EXTERNAL_STORAGE")?(n(),a("div",Te,[(n(!0),a(b,null,te(o(u),t=>{var I;return n(),a("div",{key:t.path,class:se(["file-item",{active:((I=p.value)==null?void 0:I.path)===t.path}]),onClick:v=>G(t),onDblclick:S(v=>O(t),["prevent"]),onContextmenu:v=>U(v,t)},[d.value?(n(),a("md-checkbox",{key:0,"touch-target":"wrapper",checked:t.checked},null,8,Ve)):i("",!0),o(F)(t.name)||o(R)(t.name)?(n(),a("img",{key:1,src:o(oe)(t.fileId)+"&w=50&h=50",width:"50",height:"50"},null,8,Se)):i("",!0),c("div",Fe,[h(r(t.name)+" ",1),c("div",Re,[h(r(o(ne)(t.updatedAt)),1),t.isDir?i("",!0):(n(),a(b,{key:0},[h(", "+r(o(ae)(t.size)),1)],64))])])],42,Ie)}),128))])):i("",!0),o(u).length===0?(n(),a("div",xe,r(e.$t(o(ve)(o(E),o(w).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):i("",!0)]),p.value?(n(),a("div",Ee,r(e.$t("path"))+": "+r(p.value.path),1)):i("",!0)],64)}}});const Le=pe(Ae,[["__scopeId","data-v-130ba9c2"]]);export{Le as default};

import{bt as s,d as y,r,G as N,X as g,H as T,o as f,e as b,f as u,x as o,z as E,E as S,w as j,t as _,y as c,h as v,K as w,j as D,_ as C}from"./index-71d8bb76.js";import{_ as O}from"./MonacoEditor.vuevuetypescriptsetuptruelang-43649ee4.js";import{_ as A}from"./Breadcrumb-91ff4b3f.js";import{g as x,M as H}from"./splitpanes.es-85db08aa.js";const B=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,R={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data(){return{expand:!0,canExtend:!1}},mounted(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle(){this.expand=!this.expand}},render(){let e=this.jsonValue;const t=B.test(e);let n;return this.expand?(n={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},t?(e=`<a href="${e}" target="_blank" class="jv-link">${e}</a>`,n.innerHTML=`"${e.toString()}"`):n.innerText=`"${e.toString()}"`):n={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},s("span",{},[this.canExtend&&s("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),s("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),s("span",n)])}},J={props:{jsonValue:{type:Object,default:null}},setup(e){return()=>s("span",{class:{"jv-item":!0,"jv-undefined":!0},innerText:e.jsonValue===null?"null":"undefined"})}},z={props:{jsonValue:{type:Number,required:!0}},setup(e){const t=Number.isInteger(e.jsonValue);return()=>s("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":t,"jv-number-float":!t},innerText:e.jsonValue.toString()})}},q={props:{jsonValue:Boolean},setup(e){return()=>s("span",{class:{"jv-item":!0,"jv-boolean":!0},innerText:e.jsonValue.toString()})}},I={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},expandDepth:{type:Number,default:1},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean},data(){return{value:{}}},computed:{ordered(){const e={};return Object.keys(this.value).sort().forEach(t=>{e[t]=this.value[t]}),e}},watch:{jsonValue(e){this.setValue(e)}},mounted(){this.setValue(this.jsonValue)},methods:{setValue(e){setTimeout(()=>{this.value=e},0)},toggle(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},dispatchEvent(){try{this.$el.dispatchEvent(new Event("resized"))}catch{}}},render(){const e=[];if(this.keyName||e.push(s("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),e.push(s("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"{"})),this.expand){for(const t in this.ordered)if(this.ordered.hasOwnProperty(t)){const n=this.ordered[t];e.push(s(m,{key:t,style:{display:this.expand?void 0:"none"},keyName:t,expandDepth:this.expandDepth,depth:this.depth+1,value:n}))}}return!this.expand&&Object.keys(this.value).length&&e.push(s("span",{style:{display:this.expand?"none":void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:`click to reveal object content (keys: ${Object.keys(this.ordered).join(", ")})`,innerText:"..."})),e.push(s("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"}"})),s("span",e)}},L={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},expandDepth:{type:Number,default:1},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean},data(){return{value:[]}},watch:{jsonValue(e){this.setValue(e)}},mounted(){this.setValue(this.jsonValue)},methods:{setValue(e,t=0){t===0&&(this.value=[]),setTimeout(()=>{e.length>t&&(this.value.push(e[t]),this.setValue(e,t+1))},0)},toggle(){this.$emit("update:expand",!this.expand);try{this.$el.dispatchEvent(new Event("resized"))}catch{}}},render(){const e=[];return this.keyName||e.push(s("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),e.push(s("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"["})),this.expand&&this.value.forEach((t,n)=>{e.push(s(m,{key:n,style:{display:this.expand?void 0:"none"},expandDepth:this.expandDepth,depth:this.depth+1,value:t}))}),!this.expand&&this.value.length&&e.push(s("span",{style:{display:void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:`click to reveal ${this.value.length} hidden items`,innerText:"..."})),e.push(s("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"]"})),s("span",e)}},M={props:{jsonValue:{type:Function,required:!0}},setup(e){return()=>s("span",{class:{"jv-item":!0,"jv-function":!0},attrs:{title:e.jsonValue.toString()},innerHTML:"&lt;function&gt;"})}},P={props:{jsonValue:{type:Date,required:!0}},setup(e){const t=e.jsonValue;return()=>s("span",{class:{"jv-item":!0,"jv-string":!0},innerText:`"${t.toLocaleString()}"`})}},K=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Z={name:"JsonString",props:{jsonValue:{type:RegExp,required:!0}},data(){return{expand:!0,canExtend:!1}},mounted(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle(){this.expand=!this.expand}},render(){let e=this.jsonValue;const t=K.test(e);let n;return this.expand?(n={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},t?(e=`<a href="${e}" target="_blank" class="jv-link">${e}</a>`,n.innerHTML=`${e.toString()}`):n.innerText=`${e.toString()}`):n={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},s("span",{},[this.canExtend&&s("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),s("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),s("span",n)])}};const m={name:"JsonBox",props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},expandDepth:{type:Number,default:1},keyName:{type:String,default:""},depth:{type:Number,default:0}},data(){return{expand:!0}},mounted(){this.expand=!(this.depth>=this.expandDepth)},methods:{toggle(){this.expand=!this.expand;try{this.$el.dispatchEvent(new Event("resized"))}catch{}}},render(){let e;this.value===null||this.value===void 0?e=J:Array.isArray(this.value)?e=L:Object.prototype.toString.call(this.value)==="[object Date]"?e=P:typeof this.value=="object"?e=I:typeof this.value=="number"?e=z:typeof this.value=="string"?e=R:typeof this.value=="boolean"?e=q:typeof this.value=="function"&&(e=M),this.value&&this.value.constructor===RegExp&&(e=Z);let t=!1;if(this.keyName&&this.value){if(Array.isArray(this.value)&&this.value.length)t=!0;else if(typeof this.value=="object"){const i=Object.prototype.toString.call(this.value);!["[]","[object Date]"].includes(i)&&Object.keys(this.value).length&&(t=!0)}}const n=[];return t&&n.push(s("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle})),this.keyName&&n.push(s("span",{class:{"jv-key":!0},onClick:()=>{console.log(this.keyName)},innerText:`${this.keyName}:`})),n.push(s(e,{class:{"jv-push":!0},jsonValue:this.value,keyName:this.keyName,depth:this.depth,expand:this.expand,expandDepth:this.expandDepth,"onUpdate:expand":i=>{this.expand=i}})),s("div",{class:{"jv-node":!0,"jv-key-node":!!this.keyName&&!t,toggle:t}},n)}},F={class:"jv-code"},G=y({__name:"json-viewer",props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expandDepth:{type:Number,default:1}},setup(e){const t=r("light"),n=()=>{t.value=document.documentElement.classList[0]==="dark"?"dark":"light"};return N(()=>{g.on("color_mode_changed",n)}),T(()=>{g.off("color_mode_changed",n)}),(i,d)=>{const p=m;return f(),b("div",{class:E(["jv-container",t.value])},[u("div",F,[o(p,{value:e.value,"expand-depth":e.expandDepth},null,8,["value","expand-depth"])])],2)}}});const U={class:"page-container"},X={class:"main"},Q={class:"v-toolbar"},W=y({__name:"JsonViewerView",setup(e){const t=r(""),n=r(null),i=r(1),d=r(1);S(t,l=>{try{const a=JSON.parse(l);n.value=a,t.value=JSON.stringify(a,null,4)}catch(a){console.error(a)}});function p(l){l?i.value=1e3:i.value=1,d.value++}return(l,a)=>{const k=A,V=O,$=G;return f(),b("div",U,[u("div",X,[u("div",Q,[o(k,{current:()=>l.$t("json_viewer")},null,8,["current"]),u("md-outlined-button",{onClick:a[0]||(a[0]=j(h=>p(!0),["prevent"]))},_(l.$t("expand_all")),1),u("md-outlined-button",{onClick:a[1]||(a[1]=j(h=>p(!1),["prevent"]))},_(l.$t("collapse_all")),1)]),o(v(H),{class:"panel-container"},{default:c(()=>[o(v(x),null,{default:c(()=>[o(V,{language:"json",modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=h=>t.value=h)},null,8,["modelValue"])]),_:1}),o(v(x),null,{default:c(()=>[n.value?(f(),w($,{value:n.value,"expand-depth":i.value,key:d.value},null,8,["value","expand-depth"])):D("",!0)]),_:1})]),_:1})])])}}});const ne=C(W,[["__scopeId","data-v-d8c17eb7"]]);export{ne as default};

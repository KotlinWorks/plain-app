import{o as t,c as n,e as o,d as U,u as j,r as d,a3 as g,bt as K,K as O,L as v,M as W,bu as J,i as P,t as $,bv as X,bw as Y,N as ee,x as m,F as te,O as M,j as a,g as b,l as p,av as ne,aw as oe,_ as re}from"./index-df35a132.js";import{_ as se}from"./Breadcrumb-120bdd32.js";const ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ie=o("path",{fill:"currentColor",d:"M6 19q-.425 0-.713-.288T5 18v-3q0-.425.288-.713T6 14q.425 0 .713.288T7 15v2h2q.425 0 .713.288T10 18q0 .425-.288.713T9 19H6Zm0-9q-.425 0-.713-.288T5 9V6q0-.425.288-.713T6 5h3q.425 0 .713.288T10 6q0 .425-.288.713T9 7H7v2q0 .425-.288.713T6 10Zm9 9q-.425 0-.713-.288T14 18q0-.425.288-.713T15 17h2v-2q0-.425.288-.713T18 14q.425 0 .713.288T19 15v3q0 .425-.288.713T18 19h-3Zm3-9q-.425 0-.713-.288T17 9V7h-2q-.425 0-.713-.288T14 6q0-.425.288-.713T15 5h3q.425 0 .713.288T19 6v3q0 .425-.288.713T18 10Z"},null,-1),ce=[ie];function le(r,s){return t(),n("svg",ae,ce)}const _e={name:"material-symbols-fullscreen-rounded",render:le},ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},de=o("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12q0-3.35 2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V5q0-.425.288-.713T19 4q.425 0 .713.288T20 5v5q0 .425-.288.713T19 11h-5q-.425 0-.713-.288T13 10q0-.425.288-.713T14 9h3.2q-.8-1.4-2.188-2.2T12 6Q9.5 6 7.75 7.75T6 12q0 2.5 1.75 4.25T12 18q1.725 0 3.188-.913t2.187-2.437q.125-.275.413-.463t.587-.187q.575 0 .863.4t.062.9q-.95 2.125-2.925 3.413T12 20Z"},null,-1),me=[de];function pe(r,s){return t(),n("svg",ue,me)}const ve={name:"material-symbols-refresh-rounded",render:pe},he={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qe=o("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Zm0-10Zm0 8q3.325 0 5.663-2.337T20 12q0-3.325-2.337-5.663T12 4Q8.675 4 6.337 6.337T4 12q0 3.325 2.337 5.663T12 20Zm-3-4h6q.425 0 .713-.288T16 15V9q0-.425-.288-.713T15 8H9q-.425 0-.713.288T8 9v6q0 .425.288.713T9 16Z"},null,-1),Te=[qe];function fe(r,s){return t(),n("svg",he,Te)}const ge={name:"material-symbols-stop-circle-outline-rounded",render:fe},$e="/assets/screen-mirror-permission-e9e07af8.png",Me={xmlns:"http://www.w3.org/2000/svg",viewBox:"176.31 -11.19 346.88 581.88"},be=o("path",{d:"M470.49 0H229.51a41.901 41.901 0 0 0-29.547 12.277 41.898 41.898 0 0 0-12.277 29.547v476.35a41.901 41.901 0 0 0 12.277 29.547 41.898 41.898 0 0 0 29.547 12.277h240.98a41.901 41.901 0 0 0 29.547-12.277 41.898 41.898 0 0 0 12.277-29.547V41.824a41.901 41.901 0 0 0-12.277-29.547A41.898 41.898 0 0 0 470.49 0zm33.25 518.18a33.334 33.334 0 0 1-9.766 23.484 33.335 33.335 0 0 1-23.484 9.766H229.51a33.334 33.334 0 0 1-23.484-9.766 33.335 33.335 0 0 1-9.765-23.484V41.83a33.333 33.333 0 0 1 9.828-23.371 33.32 33.32 0 0 1 23.422-9.703h240.98a33.334 33.334 0 0 1 23.484 9.765 33.335 33.335 0 0 1 9.765 23.484z"},null,-1),we=o("path",{d:"M317.62 46.812h64.75c2.418 0 4.375-1.957 4.375-4.375s-1.957-4.375-4.375-4.375h-64.75c-2.418 0-4.375 1.957-4.375 4.375s1.957 4.375 4.375 4.375zM364.7 192.5a16.8 16.8 0 0 0-14.7-8.75 16.8 16.8 0 0 0-14.698 8.75l-91 157.5a16.453 16.453 0 0 0 0 16.977 16.584 16.584 0 0 0 6.101 6.386 16.653 16.653 0 0 0 8.512 2.364h182.09a16.626 16.626 0 0 0 14.7-8.75 16.803 16.803 0 0 0 0-16.977zm83.562 170.36a8.224 8.224 0 0 1-7.262 4.2H258.91a8.229 8.229 0 0 1-7.176-4.2 8.753 8.753 0 0 1 0-8.75l91-157.5a8.748 8.748 0 0 1 7.262-4.113 8.757 8.757 0 0 1 7.262 4.199l91 157.5a8.75 8.75 0 0 1 0 8.84z"},null,-1),ye=o("path",{d:"M350 221.55a4.288 4.288 0 0 0-4.29 4.285v66.238a4.375 4.375 0 0 0 8.75 0v-66.238a4.286 4.286 0 0 0-4.46-4.285zm0 91.26a4.289 4.289 0 0 0-4.29 4.29v17.061a4.375 4.375 0 0 0 8.75 0V317.1a4.286 4.286 0 0 0-4.46-4.29z"},null,-1),Se=[be,we,ye];function ke(r,s){return t(),n("svg",Me,Se)}const Ie={render:ke},V=r=>(ne("data-v-08a704e7"),r=r(),oe(),r),Ve={class:"page-container"},Ce={class:"main"},Le={class:"v-toolbar"},He=["disabled"],Ae={key:0,class:"loading"},Ze=V(()=>o("md-circular-progress",{indeterminate:""},null,-1)),xe=[Ze],ze={key:1,class:"request-permission"},Be=V(()=>o("img",{src:$e},null,-1)),De=["innerHTML"],Qe={key:2,class:"request-permission-failed"},Ee=["src"],Fe=U({__name:"ScreenMirrorView",setup(r){let s;const{t:h}=j(),i=d(""),l=d(0),_=d(!1),w=d(),y=async e=>{i.value=e,_.value=!1,l.value=0,clearInterval(s)},u=d(!1),{mutate:C}=g({document:K,appApi:!0}),L=()=>{C(),u.value=!0},S=e=>{e&&(u.value=!1,clearInterval(s),q())};O(()=>{v.on("screen_mirrorring",y),v.on("app_socket_connection_changed",S)}),W(()=>{v.off("screen_mirrorring",y),v.off("app_socket_connection_changed",S)});const{mutate:H,loading:A,onDone:Z,onError:x}=g({document:J,appApi:!0}),{loading:z,refetch:k}=P({handle:(e,c)=>{c?$(h(c),"error"):e.screenMirrorImage?i.value=e.screenMirrorImage:q()},document:X,appApi:!0}),B=()=>{var e;(e=w.value)==null||e.requestFullscreen({navigationUI:"show"})},q=()=>{_.value=!1,H()};x(e=>{$(h(e.message)),_.value=!0}),Z(()=>{l.value=30,s=setInterval(()=>{l.value--,l.value<=0&&(_.value=!0,clearInterval(s))},1e3)});const{mutate:I,loading:D,onDone:Q,onError:E}=g({document:Y,appApi:!0});return E(e=>{$(h(e.message))}),Q(()=>{_.value=!0,i.value=""}),(e,c)=>{const F=se,G=ge,N=ve,R=_e,T=ee("tooltip");return t(),n("div",Ve,[o("div",Ce,[o("div",Le,[m(F,{current:()=>e.$t("screen_mirror")},null,8,["current"]),i.value?(t(),n(te,{key:0},[M((t(),n("md-icon-button",{disabled:a(D),onClick:c[0]||(c[0]=(...f)=>a(I)&&a(I)(...f))},[m(G)],8,He)),[[T,e.$t("stop_mirror")]]),M((t(),n("md-icon-button",{onClick:c[1]||(c[1]=(...f)=>a(k)&&a(k)(...f))},[m(N)])),[[T,e.$t("refresh")]]),M((t(),n("md-icon-button",{onClick:B},[m(R)])),[[T,e.$t("fullscreen")]])],64)):u.value?p("",!0):(t(),n("md-outlined-button",{key:1,onClick:L},b(e.$t("relaunch_app")),1))]),o("div",{ref_key:"containerRef",ref:w,class:"panel-container"},[a(z)||a(A)||u.value?(t(),n("div",Ae,xe)):p("",!0),l.value>0&&!u.value?(t(),n("div",ze,[Be,o("div",{class:"text",innerHTML:e.$t("screen_mirror_request_permission",{seconds:l.value})},null,8,De)])):p("",!0),_.value&&!i.value&&!u.value?(t(),n("div",Qe,[m(a(Ie)),o("p",null,b(e.$t("screen_mirror_request_permission_failed")),1),o("md-filled-button",{onClick:q},b(e.$t("try_again")),1)])):p("",!0),i.value?(t(),n("img",{key:3,src:i.value},null,8,Ee)):p("",!0)],512)])])}}});const Re=re(Fe,[["__scopeId","data-v-08a704e7"]]);export{Re as default};

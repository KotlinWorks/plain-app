import{d as A,u as k,p as x,r as E,i as L,t as M,bs as S,o as i,c as r,b as l,j as $,f as c,w as g,F as f,z as D,y as N,g as Q,bt as b,a0 as u,Y as _,bu as q,D as G,A as I,U as V,bv as w,bw as B}from"./index-66bea2e9.js";import{c as F}from"./index-64929f64.js";import{_ as y}from"./EditValueModal.vuevuetypescriptsetuptruelang-8fdf5735.js";import{_ as O}from"./DeleteConfirm.vuevuetypescriptsetuptruelang-f7245844.js";const z={class:"nav-title mt-4"},U=["onClick"],Y={class:"nav"},j=["onClick","onContextmenu"],K=A({__name:"TagFilter",props:{tagType:{type:String,required:!0},selected:{type:String,required:!0}},setup(s){const o=s,{t}=k(),C=x(),p=E([]),{refetch:d}=L({handle:(e,a)=>{a?M(t(a),"error"):e&&(p.value=e.tags)},document:S,variables:{type:o.tagType},appApi:!0});function v(){u(y,{title:t("add_tag"),placeholder:t("name"),mutation:()=>_({document:q,options:{update:()=>{d()}},appApi:!0}),getVariables:e=>({type:o.tagType,name:e})})}function T(e){const a=G([{name:"tag",op:"",value:b(e.name)}]);I(C,`/${{NOTE:"notes",AUDIO:"audios",IMAGE:"images",VIDEO:"videos",FEED_ENTRY:"feeds",SMS:"messages",CALL:"calls",CONTACT:"contacts",AI_CHAT:"aichats"}[o.tagType]}?q=${V(a)}`)}function h(e,a){e.preventDefault(),F({x:e.x,y:e.y,items:[{label:t("rename"),onClick:()=>{u(y,{title:t("rename"),placeholder:t("name"),value:a.name,mutation:()=>_({document:w,appApi:!0}),getVariables:n=>({id:a.id,name:n}),done:()=>{d()}})}},{label:t("delete"),onClick:()=>{u(O,{id:a.id,name:a.name,gql:B,appApi:!0,typeName:"Tag"})}}]})}return(e,a)=>(i(),r(f,null,[l("h2",z,[$(c(e.$t("tags"))+" ",1),l("button",{class:"btn btn-sm",type:"button",onClick:g(v,["prevent"])},c(e.$t("add")),9,U)]),l("ul",Y,[(i(!0),r(f,null,D(p.value,n=>(i(),r("li",{onClick:g(m=>T(n),["prevent"]),onContextmenu:m=>h(m,n),class:N({active:s.selected&&Q(b)(n.name)===s.selected})},c(n.name),43,j))),256))])],64))}});export{K as _};

import{d as j,bK as q,r as p,I as H,aF as L,bL as U,v as Q,o as w,e as P,M as T,bz as D,f as M,F as X,A as Y,bJ as E,R as F,k as s,m as O,z as ee,au as ne,av as te,_ as oe,bs as se,bM as B}from"./index-5e3ce573.js";const R=t=>(ne("data-v-efd8d0c2"),t=t(),te(),t),le=R(()=>M("span",{class:"right-arrow"},null,-1)),ae=[le],ie=R(()=>M("span",{class:"right-arrow"},null,-1)),ue=[ie],de=["disabled","onMouseenter","onFocus","onClick","headline"],ce=j({__name:"ContextSubMenu",props:{items:{type:Object,default:null},parentItem:{type:Object,default:null},options:{type:Object,default:null},zIndex:{type:Number,default:0},globalData:{type:Object,default:null},position:{type:Object,default:null}},emits:["close","keepOpen","preUpdatePos"],setup(t,{emit:o}){const f=t,{globalData:i,position:u,options:v,parentItem:l}=q(f),h=p(),y=p(),d=p(!1),C=p(!1);let m=null;const S=p(0),c=p(null),z=p({parentPosition:{x:0,y:0},screenSize:i.value.screenSize}),b=p({x:0,y:0});function W(n,e){if(e.disabled||!e.children||e.children.length==0||c.value===e)return;c.value=e,z.value.parentPosition.x=i.value.parentPosition.x+u.value.x,z.value.parentPosition.y=i.value.parentPosition.y+u.value.y,h.value&&(b.value.x=h.value.offsetWidth+(v.value.xOffset||0));const r=n.target;r&&(b.value.y=r.offsetTop+(v.value.yOffset||0))}function g(){m=c.value,setTimeout(()=>{m===c.value&&(c.value=null)})}H(c,(n,e)=>{n&&e&&setTimeout(()=>{y.value&&y.value.doCheckPos()},50)});function K(n){g(),n&&o("close",!0)}function N(n){m===n&&(m=null),o("keepOpen",l.value)}function V(n){b.value.x=n.x,b.value.y=n.y}function Z(n){n.disabled||(typeof n.onClick=="function"?(n.onClick(),o("close",!0)):(!n.children||n.children.length===0)&&o("close",!0))}function A(){o("keepOpen",l.value)}function G(n){n.relatedTarget!=null&&o("close",!1)}function $(n){h.value&&(h.value.scrollTop+=n?30:-30)}let k=0;function J(){const n=h.value,e=i.value;if(n){const r={x:u.value.x,y:u.value.y},a=e.parentPosition.x+u.value.x+n.offsetWidth;if(a>e.screenSize.w&&(r.x-=a-e.screenSize.w),n.offsetHeight>e.screenSize.h-30)S.value=e.screenSize.h-30,r.y=-e.parentPosition.y,C.value=!0;else{C.value=!1,S.value=0;const I=e.parentPosition.y+u.value.y+n.offsetHeight;I>e.screenSize.h&&(r.y-=I-e.screenSize.h+30)}o("preUpdatePos",r),d.value=!0}}return L(()=>{k=window.setTimeout(()=>J(),100)}),U(()=>{k>0&&(clearTimeout(k),k=0)}),(n,e)=>{const r=Q("ContextSubMenu",!0);return t.items?(w(),P("div",{key:0,class:ee("context-menu "+(s(v).customClass?s(v).customClass:"")+(d.value?" ready":"")),style:E({maxWidth:s(l)&&s(l).maxWidth?`${s(l).maxWidth}px`:"600px",minWidth:s(l)&&s(l).minWidth?`${s(l).minWidth}px`:"100px",zIndex:t.zIndex,left:`${s(u).x}px`,top:`${s(u).y}px`}),onMouseenter:A,onMouseleave:e[4]||(e[4]=a=>G(a))},[T(M("div",{class:"context-menu-updown up",onClick:e[0]||(e[0]=a=>$(!1))},ae,512),[[D,C.value]]),T(M("div",{class:"context-menu-updown down",onClick:e[1]||(e[1]=a=>$(!0))},ue,512),[[D,C.value]]),M("div",{class:"context-menu-items",ref_key:"menu",ref:h,style:E({maxHeight:S.value>0?`${S.value}px`:""})},[(w(!0),P(X,null,Y(t.items,(a,I)=>(w(),P("md-menu-item",{key:I,disabled:a.disabled,onMouseenter:x=>W(x,a),onMouseleave:e[2]||(e[2]=x=>g()),onFocus:x=>W(x,a),onBlur:e[3]||(e[3]=x=>g()),onClick:x=>Z(a),headline:a.label},null,40,de))),128))],4),c.value&&c.value.children?(w(),F(r,{key:0,ref_key:"childMenu",ref:y,zIndex:t.zIndex+1,items:c.value.children,parentItem:c.value,options:s(v),globalData:z.value,position:b.value,onClose:K,onKeepOpen:N,onPreUpdatePos:V},null,8,["zIndex","items","parentItem","options","globalData","position"])):O("",!0)],38)):O("",!0)}}});const re=oe(ce,[["__scopeId","data-v-efd8d0c2"]]),_={defaultMinWidth:100,defaultMaxWidth:600,defaultStartZindex:1},pe=j({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(t,{emit:o}){const f=t,i=p({x:0,y:0}),u={parentPosition:{x:0,y:0},screenSize:{w:window.innerWidth,h:window.innerHeight}};function v(){i.value.x=f.options.x,i.value.y=f.options.y}function l(){o("update:show",!1),o("close")}function h(d){d&&l()}function y(d){i.value.x=d.x,i.value.y=d.y}return L(()=>{v(),setTimeout(()=>{document.addEventListener("click",l),document.addEventListener("contextmenu",l)},100)}),U(()=>{document.removeEventListener("click",l)}),H(()=>f.show,d=>{d&&v()}),(d,C)=>{const m=re;return t.show?(w(),F(m,{key:0,items:t.options.items,parentItem:{maxWidth:t.options.maxWidth||s(_).defaultMaxWidth,minWidth:t.options.minWidth||s(_).defaultMinWidth},options:t.options,"z-index":t.options.zIndex||s(_).defaultStartZindex,globalData:u,position:i.value,"on-close":h,"on-pre-update-pos":y},null,8,["items","parentItem","options","z-index","position"])):O("",!0)}}}),ve=t=>{const o=document.createElement("div"),f=se(pe,{options:t,show:!0,onClose:()=>{B(null,o)}});return B(f,o),document.body.appendChild(o.firstElementChild),f.component};export{ve as c};
